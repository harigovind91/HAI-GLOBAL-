<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAI Global | Merchant Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background: #0f172a; }
        .glass-card { background: white; border-radius: 2.5rem; box-shadow: 0 20px 50px rgba(0,0,0,0.3); }
        video { width: 100%; height: 250px; object-fit: cover; border-radius: 1.5rem; background: #000; }
    </style>
</head>
<body class="p-4 flex items-center justify-center min-h-screen">

    <div id="auth-section" class="max-w-md w-full glass-card p-8">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-black italic">HAI<span class="text-blue-600">GLOBAL</span></h1>
            <p id="auth-title" class="text-gray-500 font-bold mt-2">Merchant Login</p>
        </div>

        <div id="login-form" class="space-y-4">
            <input type="email" id="login-email" placeholder="‡§à‡§Æ‡•á‡§≤ ‡§Ü‡§à‡§°‡•Ä" class="w-full p-4 bg-gray-100 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500">
            <input type="password" id="login-pass" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°" class="w-full p-4 bg-gray-100 rounded-2xl outline-none focus:ring-2 focus:ring-blue-500">
            <button onclick="handleLogin()" class="w-full bg-blue-600 text-white py-4 rounded-2xl font-bold shadow-lg active:scale-95 transition">‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§ï‡§∞‡•á‡§Ç</button>
            <p class="text-center text-sm">‡§ñ‡§æ‡§§‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à? <span onclick="toggleAuth()" class="text-blue-600 font-bold cursor-pointer">Sign Up</span></p>
        </div>

        <div id="signup-form" class="space-y-4 hidden">
            <input type="text" id="reg-shop" placeholder="‡§¶‡•Å‡§ï‡§æ‡§® ‡§ï‡§æ ‡§®‡§æ‡§Æ" class="w-full p-4 bg-gray-100 rounded-2xl outline-none">
            <input type="email" id="reg-email" placeholder="‡§à‡§Æ‡•á‡§≤ ‡§Ü‡§à‡§°‡•Ä" class="w-full p-4 bg-gray-100 rounded-2xl outline-none">
            <input type="password" id="reg-pass" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¨‡§®‡§æ‡§è‡§Ç" class="w-full p-4 bg-gray-100 rounded-2xl outline-none">
            <button onclick="handleSignUp()" class="w-full bg-green-600 text-white py-4 rounded-2xl font-bold shadow-lg active:scale-95 transition">‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞ ‡§ï‡§∞‡•á‡§Ç</button>
            <p class="text-center text-sm">‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§ñ‡§æ‡§§‡§æ ‡§π‡•à? <span onclick="toggleAuth()" class="text-blue-600 font-bold cursor-pointer">Login</span></p>
        </div>
    </div>

    <div id="dash-section" class="max-w-md w-full glass-card p-8 hidden">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-bold">Welcome, <span id="vendor-name" class="text-blue-600">Merchant</span></h2>
            <button onclick="location.reload()" class="text-red-500 font-bold text-sm">Logout</button>
        </div>

        <div class="relative mb-6">
            <video id="webcam" autoplay playsinline></video>
            <canvas id="canvas" class="hidden"></canvas>
            <div class="absolute bottom-4 left-0 right-0 flex justify-center">
                <button onclick="captureImage()" class="bg-red-500 w-12 h-12 rounded-full border-4 border-white shadow-xl"></button>
            </div>
        </div>

        <div class="space-y-4">
            <div id="previewBox" class="hidden bg-blue-50 p-3 rounded-xl flex items-center gap-3">
                <img id="imgPreview" class="w-12 h-12 rounded-lg object-cover">
                <span class="text-xs font-bold text-blue-700">‡§´‡•ã‡§ü‡•ã ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à!</span>
            </div>
            <input id="prod-name" placeholder="‡§â‡§§‡•ç‡§™‡§æ‡§¶ ‡§ï‡§æ ‡§®‡§æ‡§Æ" class="w-full p-4 bg-gray-100 rounded-2xl outline-none">
            <div class="flex gap-2">
                <input id="prod-price" type="number" placeholder="‡§¶‡§æ‡§Æ (‚Çπ)" class="w-2/3 p-4 bg-gray-100 rounded-2xl outline-none">
                <select id="prod-unit" class="w-1/3 bg-gray-100 rounded-2xl p-2 text-sm">
                    <option>Per KG</option>
                    <option>Liter</option>
                    <option>Unit</option>
                </select>
            </div>
            <button onclick="fireToGrid()" class="w-full bg-slate-900 text-white py-4 rounded-2xl font-bold shadow-xl">üöÄ LIST LIVE NOW</button>
        </div>
    </div>

    <script>
        // --- AUTH LOGIC ---
        function toggleAuth() {
            document.getElementById('login-form').classList.toggle('hidden');
            document.getElementById('signup-form').classList.toggle('hidden');
            document.getElementById('auth-title').innerText = 
                document.getElementById('login-form').classList.contains('hidden') ? "Create Account" : "Merchant Login";
        }

        function handleSignUp() {
            const shop = document.getElementById('reg-shop').value;
            const email = document.getElementById('reg-email').value;
            const pass = document.getElementById('reg-pass').value;
            if(!shop || !email || !pass) return alert("‡§∏‡§¨ ‡§≠‡§∞‡•á‡§Ç!");
            localStorage.setItem('user_' + email, JSON.stringify({shop, email, pass}));
            alert("‡§∏‡§´‡§≤! ‡§Ö‡§¨ ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç‡•§");
            toggleAuth();
        }

        function handleLogin() {
            const email = document.getElementById('login-email').value;
            const pass = document.getElementById('login-pass').value;
            const user = JSON.parse(localStorage.getItem('user_' + email));
            if(user && user.pass === pass) {
                document.getElementById('auth-section').classList.add('hidden');
                document.getElementById('dash-section').classList.remove('hidden');
                document.getElementById('vendor-name').innerText = user.shop;
                initCamera();
            } else { alert("‡§ó‡§≤‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä!"); }
        }

        // --- CAMERA LOGIC ---
        let finalImg = null;
        async function initCamera() {
            const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
            document.getElementById('webcam').srcObject = stream;
        }

        function captureImage() {
            const video = document.getElementById('webcam');
            const canvas = document.getElementById('canvas');
            canvas.width = video.videoWidth; canvas.height = video.videoHeight;
            canvas.getContext('2d').drawImage(video, 0, 0);
            finalImg = canvas.toDataURL('image/jpeg');
            document.getElementById('imgPreview').src = finalImg;
            document.getElementById('previewBox').classList.remove('hidden');
        }

        function fireToGrid() {
            if(!finalImg || !document.getElementById('prod-name').value) return alert("‡§Ö‡§ß‡•Ç‡§∞‡§æ ‡§°‡•á‡§ü‡§æ!");
            alert("‡§¨‡§ß‡§æ‡§à ‡§π‡•ã ‡§µ‡•à‡§ú‡•ç‡§û‡§æ‡§®‡§ø‡§ï ‡§ú‡•Ä! ‡§â‡§§‡•ç‡§™‡§æ‡§¶ 'Fire' ‡§π‡•ã ‡§ó‡§Ø‡§æ‡•§");
        }
    </script>
</body>
                                                                 </html>
                                                           
