<script>
    let mediaData = 'üì¶'; // ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü ‡§Ü‡§á‡§ï‡•â‡§®

    // ‡§ó‡•à‡§≤‡§∞‡•Ä ‡§Ø‡§æ ‡§ï‡•à‡§Æ‡§∞‡§æ ‡§∏‡•á ‡§´‡§æ‡§á‡§≤ ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡§æ (‡§¨‡§ø‡§®‡§æ ‡§ï‡•Å‡§õ ‡§π‡§ü‡§æ‡§è ‡§®‡§Ø‡§æ ‡§≤‡•â‡§ú‡§ø‡§ï)
    document.getElementById('prod-media').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(event) {
                mediaData = event.target.result; // ‡§´‡§æ‡§á‡§≤ ‡§ï‡§æ ‡§°‡•á‡§ü‡§æ (Base64)
                alert("HAI System: ‡§Æ‡•Ä‡§°‡§ø‡§Ø‡§æ ‡§´‡§æ‡§á‡§≤ (‡§´‡•ã‡§ü‡•ã/‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã) ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§≤‡•ã‡§° ‡§π‡•ã ‡§ó‡§à ‡§π‡•à‡•§");
            };
            reader.readAsDataURL(file);
        }
    });

    // ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§ï‡•à‡§Æ‡§∞‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§°‡§æ‡§Ø‡§∞‡•á‡§ï‡•ç‡§ü ‡§è‡§ï‡•ç‡§∏‡•á‡§∏
    async function openCamera() {
        // ‡§Ü‡§™‡§ï‡•á ‡§™‡•Å‡§∞‡§æ‡§®‡•á ‡§Æ‡•à‡§∏‡•á‡§ú ‡§ï‡•ã ‡§∞‡§ñ‡§§‡•á ‡§π‡•Å‡§è ‡§ï‡•à‡§Æ‡§∞‡§æ ‡§ü‡•ç‡§∞‡§ø‡§ó‡§∞
        alert("HAI System: Camera logic engaged. Scientist Harigovind, please ensure HTTPS is active for camera access.");
        document.getElementById('prod-media').setAttribute('accept', 'image/*,video/*');
        document.getElementById('prod-media').setAttribute('capture', 'environment');
        document.getElementById('prod-media').click();
    }

    function registerSeller() {
        const seller = {
            name: document.getElementById('s-name').value,
            shop: document.getElementById('s-shop').value,
            country: document.getElementById('s-country').value,
            pin: document.getElementById('s-pin').value
        };

        const product = {
            id: 'HAI-PROD-' + Date.now(),
            name: document.getElementById('p-title').value,
            price: document.getElementById('p-price').value,
            unit: document.getElementById('p-unit').value,
            sellerShop: seller.shop,
            img: mediaData, // ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§¨ ‡§Ö‡§∏‡§≤‡•Ä ‡§´‡•ã‡§ü‡•ã/‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§°‡•á‡§ü‡§æ ‡§∏‡•á‡§µ ‡§π‡•ã‡§ó‡§æ
            timestamp: new Date().toLocaleString()
        };

        if(!seller.shop || !product.name || !product.price) return alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§≠‡•Ä ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§≠‡§∞‡•á‡§Ç!");

        localStorage.setItem('active_seller', JSON.stringify(seller));

        let globalList = JSON.parse(localStorage.getItem('custom_products')) || [];
        globalList.push(product);
        localStorage.setItem('custom_products', JSON.stringify(globalList));

        alert("‡§¨‡§ß‡§æ‡§à! ‡§Ü‡§™‡§ï‡§æ ‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü " + seller.country + " ‡§ï‡•á ‡§≤‡§ø‡§è ‡§≤‡§æ‡§á‡§µ ‡§π‡•ã ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§");
        window.location.href = 'index.html'; 
    }
</script>
